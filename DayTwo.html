<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Day 2: Ratios, Rates, Percentages & Unit Conversions</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #fafaf9;
      --surface: #ffffff;
      --surface-alt: #f5f5f4;
      --border: #e7e5e4;
      --border-strong: #d6d3d1;
      --text: #1c1917;
      --text-secondary: #57534e;
      --text-muted: #78716c;
      --accent: #8b5cf6;
      --accent-light: #ede9fe;
      --accent-dark: #7c3aed;
      --code-bg: #1e1e1e;
      --code-text: #d4d4d4;
      --success: #16a34a;
      --success-bg: #dcfce7;
      --error: #dc2626;
      --error-bg: #fee2e2;
      --warning: #d97706;
      --warning-bg: #fef3c7;
      --info: #0891b2;
      --info-bg: #cffafe;
      --shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
      --radius: 8px;
      --radius-lg: 12px;
      --font-serif: 'Source Serif 4', Georgia, serif;
      --font-sans: 'DM Sans', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body { font-family: var(--font-sans); background: var(--bg); color: var(--text); line-height: 1.7; font-size: 16px; }
    .nav { position: sticky; top: 0; z-index: 100; background: rgba(250,250,249,0.92); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); padding: 12px 24px; }
    .nav-inner { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .nav-back { display: inline-flex; align-items: center; gap: 8px; color: var(--text-secondary); text-decoration: none; font-weight: 500; font-size: 14px; padding: 8px 12px; border-radius: var(--radius); transition: all 0.15s; }
    .nav-back:hover { background: var(--surface-alt); color: var(--text); }
    .nav-progress { display: flex; align-items: center; gap: 12px; font-size: 13px; color: var(--text-muted); }
    .progress-bar { width: 120px; height: 6px; background: var(--border); border-radius: 999px; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.3s ease; }
    .hero { max-width: 1200px; margin: 0 auto; padding: 48px 24px 32px; }
    .hero-label { display: inline-flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 600; color: var(--accent-dark); background: var(--accent-light); padding: 6px 12px; border-radius: 999px; margin-bottom: 16px; }
    .hero h1 { font-family: var(--font-serif); font-size: clamp(32px, 5vw, 48px); font-weight: 700; line-height: 1.2; letter-spacing: -0.02em; margin-bottom: 16px; }
    .hero-desc { font-size: 18px; color: var(--text-secondary); max-width: 720px; line-height: 1.6; }
    .hero-meta { display: flex; flex-wrap: wrap; gap: 16px; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border); }
    .meta-item { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--text-muted); }
    .main-layout { max-width: 1200px; margin: 0 auto; padding: 0 24px 80px; display: grid; grid-template-columns: 260px 1fr; gap: 48px; }
    @media (max-width: 900px) { .main-layout { grid-template-columns: 1fr; } .sidebar { display: none; } }
    .sidebar { position: sticky; top: 80px; align-self: start; }
    .toc { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 16px; }
    .toc-title { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 12px; }
    .toc-list { list-style: none; }
    .toc-link { display: block; padding: 8px 12px; font-size: 14px; color: var(--text-secondary); text-decoration: none; border-radius: var(--radius); border-left: 2px solid transparent; margin-left: -2px; transition: all 0.15s; }
    .toc-link:hover { color: var(--text); background: var(--surface-alt); }
    .toc-link.active { color: var(--accent-dark); background: var(--accent-light); border-left-color: var(--accent); }
    .stats-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 16px; margin-top: 16px; }
    .stats-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; font-size: 13px; }
    .stats-label { color: var(--text-muted); }
    .stats-value { font-weight: 600; font-family: var(--font-mono); color: var(--text); }
    .content { min-width: 0; }
    .section { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); margin-bottom: 24px; overflow: hidden; }
    .section-header { padding: 24px 28px 20px; border-bottom: 1px solid var(--border); }
    .section-number { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--accent); margin-bottom: 4px; }
    .section-title { font-family: var(--font-serif); font-size: 24px; font-weight: 700; }
    .section-body { padding: 24px 28px; }
    .subsection { margin-bottom: 32px; }
    .subsection:last-child { margin-bottom: 0; }
    .subsection-title { font-size: 16px; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
    .subsection-title::before { content: ''; width: 4px; height: 4px; background: var(--accent); border-radius: 50%; }
    p { margin-bottom: 12px; color: var(--text-secondary); }
    .math-block { background: var(--surface-alt); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px 20px; margin: 16px 0; font-family: var(--font-mono); font-size: 15px; color: var(--text); overflow-x: auto; white-space: pre-wrap; }
    .math-inline { font-family: var(--font-mono); font-size: 14px; background: var(--surface-alt); padding: 2px 6px; border-radius: 4px; }
    .rule { background: var(--accent-light); border-left: 3px solid var(--accent); border-radius: 0 var(--radius) var(--radius) 0; padding: 16px 20px; margin: 16px 0; color: var(--accent-dark); font-weight: 500; }
    .warning { background: var(--warning-bg); border-left: 3px solid var(--warning); border-radius: 0 var(--radius) var(--radius) 0; padding: 16px 20px; margin: 16px 0; color: #92400e; }
    .warning strong { color: #78350f; }
    .info { background: var(--info-bg); border-left: 3px solid var(--info); border-radius: 0 var(--radius) var(--radius) 0; padding: 16px 20px; margin: 16px 0; color: #155e75; }
    .code-block { background: var(--code-bg); border-radius: var(--radius); margin: 16px 0; overflow: hidden; }
    .code-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 16px; background: #2d2d2d; border-bottom: 1px solid #3d3d3d; }
    .code-lang { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: #a1a1aa; text-transform: uppercase; letter-spacing: 0.05em; }
    .code-label { font-size: 12px; color: #71717a; }
    .code-content { padding: 16px 20px; overflow-x: auto; }
    .code-content pre { margin: 0; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; color: var(--code-text); }
    .code-keyword { color: #c586c0; }
    .code-function { color: #dcdcaa; }
    .code-string { color: #ce9178; }
    .code-number { color: #b5cea8; }
    .code-comment { color: #6a9955; }
    .code-type { color: #4ec9b0; }
    ul { margin: 12px 0 12px 24px; color: var(--text-secondary); }
    li { margin-bottom: 8px; }
    li strong { color: var(--text); }
    .table-wrap { overflow-x: auto; margin: 16px 0; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th, td { padding: 12px 16px; text-align: left; border-bottom: 1px solid var(--border); }
    th { background: var(--surface-alt); font-weight: 600; color: var(--text); }
    td { color: var(--text-secondary); }
    .video-container { display: grid; grid-template-columns: 1.2fr 1fr; gap: 20px; margin-top: 16px; }
    @media (max-width: 800px) { .video-container { grid-template-columns: 1fr; } }
    .video-player { background: var(--code-bg); border-radius: var(--radius-lg); overflow: hidden; }
    .video-player iframe { width: 100%; aspect-ratio: 16/9; display: block; border: 0; }
    .video-info { padding: 16px; border-top: 1px solid #3d3d3d; }
    .video-title { font-weight: 600; color: #fff; font-size: 14px; margin-bottom: 4px; }
    .video-meta { font-size: 13px; color: #a1a1aa; }
    .video-list { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); overflow: hidden; max-height: 480px; overflow-y: auto; }
    .video-group-title { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); padding: 16px 16px 8px; background: var(--surface-alt); position: sticky; top: 0; }
    .video-item { display: flex; gap: 12px; padding: 12px 16px; cursor: pointer; border: none; background: transparent; width: 100%; text-align: left; transition: background 0.15s; }
    .video-item:hover { background: var(--surface-alt); }
    .video-item.active { background: var(--accent-light); }
    .video-num { font-family: var(--font-mono); font-size: 12px; color: var(--accent); font-weight: 600; min-width: 24px; }
    .video-item-title { font-size: 14px; font-weight: 500; color: var(--text); line-height: 1.4; }
    .video-item-desc { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
    .quiz-controls { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
    .btn { display: inline-flex; align-items: center; gap: 6px; padding: 10px 16px; font-size: 14px; font-weight: 600; border-radius: var(--radius); border: 1px solid var(--border); background: var(--surface); color: var(--text); cursor: pointer; transition: all 0.15s; }
    .btn:hover { background: var(--surface-alt); border-color: var(--border-strong); }
    .btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
    .btn-primary:hover { background: var(--accent-dark); }
    .btn-danger { color: var(--error); border-color: var(--error); }
    .btn-danger:hover { background: var(--error-bg); }
    .question { background: var(--surface-alt); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 20px; margin-bottom: 16px; }
    .question-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; margin-bottom: 12px; }
    .question-num { font-family: var(--font-mono); font-size: 13px; font-weight: 700; color: var(--accent); }
    .question-topic { font-size: 12px; color: var(--text-muted); background: var(--surface); padding: 4px 10px; border-radius: 999px; border: 1px solid var(--border); }
    .question-prompt { font-family: var(--font-mono); font-size: 16px; font-weight: 500; color: var(--text); background: var(--surface); padding: 16px 20px; border-radius: var(--radius); border: 1px solid var(--border); margin-bottom: 16px; }
    .question-input-row { display: flex; gap: 10px; flex-wrap: wrap; }
    .question-input { flex: 1; min-width: 200px; padding: 12px 16px; font-family: var(--font-mono); font-size: 15px; border: 2px solid var(--border); border-radius: var(--radius); background: var(--surface); color: var(--text); outline: none; transition: border-color 0.15s; }
    .question-input:focus { border-color: var(--accent); }
    .question-input.correct { border-color: var(--success); background: var(--success-bg); }
    .question-input.incorrect { border-color: var(--error); background: var(--error-bg); }
    .question-result { margin-top: 12px; font-size: 14px; font-weight: 500; }
    .question-result .success { color: var(--success); }
    .question-result .error { color: var(--error); }
    .question-answer { margin-top: 8px; font-family: var(--font-mono); font-size: 13px; color: var(--accent-dark); background: var(--accent-light); padding: 8px 12px; border-radius: var(--radius); display: inline-block; }
  </style>
</head>
<body>
  <nav class="nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-back">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 12L6 8L10 4"/></svg>
        Back to Curriculum
      </a>
      <div class="nav-progress">
        <span id="progressText">0 / 20 complete</span>
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
      </div>
    </div>
  </nav>

  <header class="hero">
    <div class="hero-label">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0L10 6H16L11 9.5L13 16L8 12L3 16L5 9.5L0 6H6L8 0Z"/></svg>
      Day 2 · Foundation
    </div>
    <h1>Ratios, Rates, Percentages & Unit Conversions</h1>
    <p class="hero-desc">These concepts power everything from API rate limiting to performance optimization. Learn to think in proportions—it's how you reason about scalability and efficiency.</p>
    <div class="hero-meta">
      <div class="meta-item">~40 min read</div>
      <div class="meta-item">20 practice problems</div>
      <div class="meta-item">10 video lessons</div>
    </div>
  </header>

  <div class="main-layout">
    <aside class="sidebar">
      <nav class="toc">
        <div class="toc-title">On this page</div>
        <ul class="toc-list">
          <li><a href="#why" class="toc-link">Why This Matters</a></li>
          <li><a href="#ratios" class="toc-link">1. Ratios</a></li>
          <li><a href="#rates" class="toc-link">2. Rates</a></li>
          <li><a href="#percentages" class="toc-link">3. Percentages</a></li>
          <li><a href="#conversions" class="toc-link">4. Unit Conversions</a></li>
          <li><a href="#gotchas" class="toc-link">5. Common Gotchas</a></li>
          <li><a href="#videos" class="toc-link">6. Video Lessons</a></li>
          <li><a href="#practice" class="toc-link">7. Practice Problems</a></li>
        </ul>
      </nav>
      <div class="stats-card">
        <div class="toc-title">Your Progress</div>
        <div class="stats-row"><span class="stats-label">Attempted</span><span class="stats-value" id="statAttempted">0</span></div>
        <div class="stats-row"><span class="stats-label">Correct</span><span class="stats-value" id="statCorrect">0</span></div>
        <div class="stats-row"><span class="stats-label">Accuracy</span><span class="stats-value" id="statAccuracy">—</span></div>
      </div>
    </aside>

    <main class="content">
      <!-- Why This Matters -->
      <section class="section" id="why">
        <div class="section-header">
          <div class="section-number">Section 0</div>
          <h2 class="section-title">Why Ratios & Rates Matter in CS</h2>
        </div>
        <div class="section-body">
          <p>Ratios and rates are everywhere in software engineering. Compression ratios, throughput rates, cache hit percentages, conversion rates—you can't escape them.</p>
          <div class="rule"><strong>The pattern:</strong> Almost every performance metric is either a ratio (comparing two quantities) or a rate (quantity per unit time/space).</div>
          <div class="subsection">
            <h3 class="subsection-title">Where you'll use this</h3>
            <ul>
              <li><strong>Rate Limiting:</strong> 1000 requests/minute, token bucket algorithms</li>
              <li><strong>Performance:</strong> Throughput (ops/sec), latency percentiles (p99)</li>
              <li><strong>Data:</strong> Compression ratios, normalization (0-1 scaling)</li>
              <li><strong>Business:</strong> Conversion rates, churn percentages, A/B test results</li>
            </ul>
          </div>
          <div class="code-block">
            <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Rate limiting uses ratios</span></div>
            <div class="code-content"><pre><span class="code-keyword">class</span> <span class="code-type">RateLimiter</span>:
    <span class="code-string">"""Token bucket: requests per second."""</span>
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(self, rate, capacity):
        self.rate = rate      <span class="code-comment"># tokens per second</span>
        self.capacity = capacity
        self.tokens = capacity
        self.last = time.<span class="code-function">time</span>()
    
    <span class="code-keyword">def</span> <span class="code-function">allow</span>(self):
        now = time.<span class="code-function">time</span>()
        <span class="code-comment"># rate × time = tokens added</span>
        self.tokens = <span class="code-function">min</span>(self.capacity, 
                          self.tokens + (now - self.last) * self.rate)
        self.last = now
        <span class="code-keyword">if</span> self.tokens >= <span class="code-number">1</span>:
            self.tokens -= <span class="code-number">1</span>
            <span class="code-keyword">return</span> <span class="code-keyword">True</span>
        <span class="code-keyword">return</span> <span class="code-keyword">False</span></pre></div>
          </div>
        </div>
      </section>

      <!-- Ratios -->
      <section class="section" id="ratios">
        <div class="section-header">
          <div class="section-number">Section 1</div>
          <h2 class="section-title">Ratios</h2>
        </div>
        <div class="section-body">
          <div class="subsection">
            <h3 class="subsection-title">What is a ratio?</h3>
            <p>A ratio compares two quantities. Written as <span class="math-inline">a : b</span> or <span class="math-inline">a/b</span>.</p>
            <div class="math-block">ratio of a to b = a : b = a/b</div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">Simplifying ratios</h3>
            <div class="rule">Divide both parts by their GCD, just like fractions.</div>
            <div class="math-block">12 : 18 = (12÷6) : (18÷6) = 2 : 3</div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Aspect ratio calculation</span></div>
              <div class="code-content"><pre><span class="code-keyword">import</span> math

<span class="code-keyword">def</span> <span class="code-function">aspect_ratio</span>(width, height):
    g = math.<span class="code-function">gcd</span>(width, height)
    <span class="code-keyword">return</span> (width // g, height // g)

<span class="code-function">print</span>(<span class="code-function">aspect_ratio</span>(<span class="code-number">1920</span>, <span class="code-number">1080</span>))  <span class="code-comment"># (16, 9)</span>
<span class="code-function">print</span>(<span class="code-function">aspect_ratio</span>(<span class="code-number">2560</span>, <span class="code-number">1440</span>))  <span class="code-comment"># (16, 9)</span>
<span class="code-function">print</span>(<span class="code-function">aspect_ratio</span>(<span class="code-number">1024</span>, <span class="code-number">768</span>))   <span class="code-comment"># (4, 3)</span></pre></div>
            </div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">Part-to-part vs part-to-whole</h3>
            <ul>
              <li><strong>Part-to-part:</strong> wins:losses = 3:2</li>
              <li><strong>Part-to-whole:</strong> wins:total = 3:5 (this is win rate!)</li>
            </ul>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Cache hit rate</span></div>
              <div class="code-content"><pre>cache_hits = <span class="code-number">850</span>
cache_misses = <span class="code-number">150</span>
total = cache_hits + cache_misses  <span class="code-comment"># 1000</span>

<span class="code-comment"># Part-to-part: hit:miss ratio</span>
hit_miss = cache_hits / cache_misses  <span class="code-comment"># 5.67</span>

<span class="code-comment"># Part-to-whole: hit rate (what you usually want)</span>
hit_rate = cache_hits / total  <span class="code-comment"># 0.85 = 85%</span></pre></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Rates -->
      <section class="section" id="rates">
        <div class="section-header">
          <div class="section-number">Section 2</div>
          <h2 class="section-title">Rates</h2>
        </div>
        <div class="section-body">
          <div class="subsection">
            <h3 class="subsection-title">What is a rate?</h3>
            <p>A rate is a ratio with different units. It describes how one quantity changes with respect to another.</p>
            <div class="math-block">rate = quantity / unit

Examples:
  60 miles/hour (speed)
  1000 requests/second (throughput)
  8 bits/byte (conversion factor)</div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">The fundamental formula</h3>
            <div class="math-block">amount = rate × time
rate = amount / time
time = amount / rate</div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Download time estimation</span></div>
              <div class="code-content"><pre><span class="code-keyword">def</span> <span class="code-function">download_time</span>(file_mb, speed_mbps):
    <span class="code-string">"""
    Note: ISPs use Mbps (megabits), files use MB (megabytes)
    1 byte = 8 bits
    """</span>
    speed_mb_per_sec = speed_mbps / <span class="code-number">8</span>  <span class="code-comment"># Mbps → MB/s</span>
    <span class="code-keyword">return</span> file_mb / speed_mb_per_sec

<span class="code-comment"># 4GB file on 100 Mbps connection</span>
time_sec = <span class="code-function">download_time</span>(<span class="code-number">4000</span>, <span class="code-number">100</span>)  <span class="code-comment"># 320 seconds</span>

<span class="code-comment"># Common trap: 100 Mbps ≠ 100 MB/s!</span></pre></div>
            </div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">Combining rates</h3>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Parallel vs sequential</span></div>
              <div class="code-content"><pre><span class="code-comment"># Parallel workers: rates ADD</span>
workers = [<span class="code-number">100</span>, <span class="code-number">150</span>, <span class="code-number">120</span>]  <span class="code-comment"># ops/sec each</span>
total_throughput = <span class="code-function">sum</span>(workers)  <span class="code-comment"># 370 ops/sec</span>

<span class="code-comment"># Pipeline: use SLOWEST rate (bottleneck)</span>
stages = [<span class="code-number">200</span>, <span class="code-number">80</span>, <span class="code-number">150</span>]  <span class="code-comment"># ops/sec each stage</span>
pipeline_rate = <span class="code-function">min</span>(stages)  <span class="code-comment"># 80 ops/sec</span></pre></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Percentages -->
      <section class="section" id="percentages">
        <div class="section-header">
          <div class="section-number">Section 3</div>
          <h2 class="section-title">Percentages</h2>
        </div>
        <div class="section-body">
          <div class="subsection">
            <h3 class="subsection-title">What is a percentage?</h3>
            <div class="math-block">p% = p/100 = p per 100

25% = 25/100 = 0.25 = 1/4</div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">The three percentage problems</h3>
            <div class="rule">
              <strong>1. Find the part:</strong> What is 20% of 150? → 0.20 × 150 = 30<br>
              <strong>2. Find the percent:</strong> 30 is what % of 150? → 30/150 = 20%<br>
              <strong>3. Find the whole:</strong> 30 is 20% of what? → 30/0.20 = 150
            </div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Conversion funnel</span></div>
              <div class="code-content"><pre>visitors = <span class="code-number">10000</span>
signups = <span class="code-number">800</span>
purchases = <span class="code-number">120</span>

<span class="code-comment"># Find percent (conversion rates)</span>
signup_rate = signups / visitors  <span class="code-comment"># 0.08 = 8%</span>
purchase_rate = purchases / signups  <span class="code-comment"># 0.15 = 15%</span>
overall = purchases / visitors  <span class="code-comment"># 0.012 = 1.2%</span>

<span class="code-comment"># Find part (projection)</span>
projected = <span class="code-number">0.012</span> * <span class="code-number">50000</span>  <span class="code-comment"># 600 purchases</span>

<span class="code-comment"># Find whole (goal)</span>
needed_visitors = <span class="code-number">1000</span> / <span class="code-number">0.012</span>  <span class="code-comment"># 83,333</span></pre></div>
            </div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">Percent change</h3>
            <div class="math-block">percent change = (new - old) / old × 100%</div>
            <div class="warning">
              <strong>Percentage points vs percent:</strong><br>
              If conversion goes from 2% to 3%:<br>
              • <strong>1 percentage point</strong> increase (3% - 2%)<br>
              • <strong>50 percent</strong> increase ((3-2)/2 × 100)<br>
              These are very different!
            </div>
          </div>
        </div>
      </section>
      <!-- Unit Conversions -->
      <section class="section" id="conversions">
        <div class="section-header">
          <div class="section-number">Section 4</div>
          <h2 class="section-title">Unit Conversions</h2>
        </div>
        <div class="section-body">
          <div class="subsection">
            <h3 class="subsection-title">The core method</h3>
            <div class="rule">Multiply by a conversion factor that equals 1. The old unit cancels.</div>
            <div class="math-block">5 km × (1000 m / 1 km) = 5000 m</div>
          </div>
          <div class="subsection">
            <h3 class="subsection-title">CS-essential conversions</h3>
            <div class="table-wrap">
              <table>
                <thead><tr><th>Category</th><th>Conversion</th><th>Factor</th></tr></thead>
                <tbody>
                  <tr><td>Data</td><td>bytes ↔ bits</td><td>1 byte = 8 bits</td></tr>
                  <tr><td>Data</td><td>KB ↔ bytes</td><td>1 KB = 1024 bytes (binary)</td></tr>
                  <tr><td>Data</td><td>MB ↔ KB</td><td>1 MB = 1024 KB</td></tr>
                  <tr><td>Time</td><td>ms ↔ s</td><td>1 s = 1000 ms</td></tr>
                  <tr><td>Time</td><td>μs ↔ ms</td><td>1 ms = 1000 μs</td></tr>
                  <tr><td>Network</td><td>Mbps ↔ MB/s</td><td>Mbps ÷ 8 = MB/s</td></tr>
                </tbody>
              </table>
            </div>
            <div class="info">
              <strong>Binary vs SI:</strong> A "500 GB" drive has ~465 GiB usable.<br>
              SI (1000): kB, MB, GB · Binary (1024): KiB, MiB, GiB
            </div>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Python</span><span class="code-label">Byte formatting</span></div>
              <div class="code-content"><pre><span class="code-keyword">def</span> <span class="code-function">bytes_to_human</span>(num_bytes, binary=<span class="code-keyword">True</span>):
    base = <span class="code-number">1024</span> <span class="code-keyword">if</span> binary <span class="code-keyword">else</span> <span class="code-number">1000</span>
    suffix = <span class="code-string">'i'</span> <span class="code-keyword">if</span> binary <span class="code-keyword">else</span> <span class="code-string">''</span>
    <span class="code-keyword">for</span> unit <span class="code-keyword">in</span> [<span class="code-string">'B'</span>, <span class="code-string">f'K{suffix}B'</span>, <span class="code-string">f'M{suffix}B'</span>, <span class="code-string">f'G{suffix}B'</span>]:
        <span class="code-keyword">if</span> <span class="code-function">abs</span>(num_bytes) < base:
            <span class="code-keyword">return</span> <span class="code-string">f"</span>{num_bytes:.2f} {unit}<span class="code-string">"</span>
        num_bytes /= base
    <span class="code-keyword">return</span> <span class="code-string">f"</span>{num_bytes:.2f} TiB<span class="code-string">"</span>

<span class="code-function">print</span>(<span class="code-function">bytes_to_human</span>(<span class="code-number">1073741824</span>))  <span class="code-comment"># 1.00 GiB</span></pre></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Gotchas -->
      <section class="section" id="gotchas">
        <div class="section-header">
          <div class="section-number">Section 5</div>
          <h2 class="section-title">Common Gotchas</h2>
        </div>
        <div class="section-body">
          <div class="warning">
            <strong>1. Bits vs Bytes</strong><br>
            100 Mbps = 12.5 MB/s, not 100 MB/s!
          </div>
          <div class="warning">
            <strong>2. Percentage points vs percent change</strong><br>
            2% → 4% is +2pp but +100% increase. Clarify which you mean.
          </div>
          <div class="warning">
            <strong>3. Inverse rates</strong><br>
            100 ops/sec = 10 ms/op (not 100 ms/op).<br>
            ms/op = 1000 / (ops/sec)
          </div>
          <div class="warning">
            <strong>4. Binary vs decimal prefixes</strong><br>
            1 TB = 10¹² bytes, but 1 TiB = 2⁴⁰ bytes. ~9% difference!
          </div>
          <div class="warning">
            <strong>5. Compound growth</strong><br>
            10% for 5 years ≠ 50%. It's 1.10⁵ = 61%.
          </div>
        </div>
      </section>

      <!-- Videos -->
      <section class="section" id="videos">
        <div class="section-header">
          <div class="section-number">Section 6</div>
          <h2 class="section-title">Video Lessons</h2>
        </div>
        <div class="section-body">
          <p>Click any video to play.</p>
          <div class="video-container">
            <div class="video-player">
              <iframe id="ytPlayer" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              <div class="video-info">
                <div class="video-title" id="videoTitle">Select a video</div>
                <div class="video-meta" id="videoMeta"></div>
              </div>
            </div>
            <div class="video-list" id="videoList"></div>
          </div>
        </div>
      </section>

      <!-- Practice -->
      <section class="section" id="practice">
        <div class="section-header">
          <div class="section-number">Section 7</div>
          <h2 class="section-title">Practice Problems</h2>
        </div>
        <div class="section-body">
          <p>Type your answer and press Check. Accepts decimals, fractions, or percentages.</p>
          <div class="quiz-controls">
            <button class="btn btn-primary" id="btnCheckAll">Check All</button>
            <button class="btn" id="btnRevealAll">Reveal All</button>
            <button class="btn" id="btnClear">Clear Inputs</button>
            <button class="btn btn-danger" id="btnReset">Reset Stats</button>
          </div>
          <div id="quizContainer"></div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Utilities
    function normalizeInput(s) {
      if (!s) return "";
      return s.trim().replace(/,/g, "").replace(/%$/, "");
    }

    function parseAnswer(str) {
      const s = normalizeInput(str).toLowerCase();
      if (!s) return null;
      const isPercent = str.trim().endsWith('%');
      
      // Fraction
      const fracMatch = s.match(/^([+-]?\d+(?:\.\d+)?)\s*\/\s*([+-]?\d+(?:\.\d+)?)$/);
      if (fracMatch) {
        const val = parseFloat(fracMatch[1]) / parseFloat(fracMatch[2]);
        return isNaN(val) ? null : val;
      }
      
      // Ratio
      const ratioMatch = s.match(/^([+-]?\d+(?:\.\d+)?)\s*:\s*([+-]?\d+(?:\.\d+)?)$/);
      if (ratioMatch) {
        const val = parseFloat(ratioMatch[1]) / parseFloat(ratioMatch[2]);
        return isNaN(val) ? null : val;
      }
      
      const num = parseFloat(s);
      if (isNaN(num)) return null;
      return isPercent ? num / 100 : num;
    }

    function nearlyEqual(a, b, tol = 0.01) {
      if (a === b) return true;
      const scale = Math.max(1, Math.abs(a), Math.abs(b));
      return Math.abs(a - b) <= tol * scale;
    }

    // Quiz Data
    const QUESTIONS = [
      { id: 1, topic: "Ratios", prompt: "Simplify 24:36 (enter as decimal)", answer: 2/3, display: "2:3 or 0.667" },
      { id: 2, topic: "Ratios", prompt: "Cache hits:misses = 850:150. Hit rate?", answer: 0.85, display: "0.85 or 85%" },
      { id: 3, topic: "Ratios", prompt: "Screen 2560×1440. Aspect ratio? (as decimal)", answer: 16/9, display: "16:9 or 1.778" },
      { id: 4, topic: "Ratios", prompt: "Wins:Losses = 3:2. Win rate?", answer: 0.6, display: "0.6 or 60%" },
      { id: 5, topic: "Rates", prompt: "50,000 ops in 2.5 sec. Ops/sec?", answer: 20000, display: "20000" },
      { id: 6, topic: "Rates", prompt: "100 ops/sec = how many ms/op?", answer: 10, display: "10" },
      { id: 7, topic: "Rates", prompt: "4GB at 100 Mbps. Seconds?", answer: 320, display: "320" },
      { id: 8, topic: "Rates", prompt: "Workers: 100, 150, 80 ops/sec. Parallel total?", answer: 330, display: "330" },
      { id: 9, topic: "Percentages", prompt: "15% of 240?", answer: 36, display: "36" },
      { id: 10, topic: "Percentages", prompt: "45 is what % of 180?", answer: 0.25, display: "25%" },
      { id: 11, topic: "Percentages", prompt: "60 is 40% of what?", answer: 150, display: "150" },
      { id: 12, topic: "Percentages", prompt: "250ms to 180ms. Percent change?", answer: -0.28, display: "-28%" },
      { id: 13, topic: "Percentages", prompt: "2% to 3%. Percent increase?", answer: 0.50, display: "50%" },
      { id: 14, topic: "Percentages", prompt: "10% growth, 3 years. Factor?", answer: 1.331, display: "1.331" },
      { id: 15, topic: "Conversions", prompt: "2.5 GB to MB (1024)", answer: 2560, display: "2560" },
      { id: 16, topic: "Conversions", prompt: "500,000 μs to seconds", answer: 0.5, display: "0.5" },
      { id: 17, topic: "Conversions", prompt: "100 Mbps = ? MB/s", answer: 12.5, display: "12.5" },
      { id: 18, topic: "Conversions", prompt: "1 TB (decimal) = ? GiB (round)", answer: 931, display: "931" },
      { id: 19, topic: "Conversions", prompt: "5 GB/s = ? KB/ms (1024)", answer: 5242.88, display: "5242.88" },
      { id: 20, topic: "Conversions", prompt: "50ms latency = max req/sec?", answer: 20, display: "20" },
    ];

    // State
    const LS_KEY = "day2_stats_v1";
    let stats = loadStats();
    let sessionCorrect = 0;

    function loadStats() {
      try {
        const raw = localStorage.getItem(LS_KEY);
        return raw ? JSON.parse(raw) : { attempted: 0, correct: 0 };
      } catch { return { attempted: 0, correct: 0 }; }
    }

    function saveStats() {
      localStorage.setItem(LS_KEY, JSON.stringify(stats));
    }

    function updateUI() {
      document.getElementById("statAttempted").textContent = stats.attempted;
      document.getElementById("statCorrect").textContent = stats.correct;
      document.getElementById("statAccuracy").textContent = stats.attempted > 0 
        ? `${Math.round((stats.correct / stats.attempted) * 100)}%` : "—";
      const pct = Math.round((sessionCorrect / QUESTIONS.length) * 100);
      document.getElementById("progressText").textContent = `${sessionCorrect} / ${QUESTIONS.length} complete`;
      document.getElementById("progressFill").style.width = `${pct}%`;
    }

    // Quiz
    function renderQuiz() {
      const container = document.getElementById("quizContainer");
      container.innerHTML = "";
      QUESTIONS.forEach(q => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `
          <div class="question-header">
            <span class="question-num">Q${q.id}</span>
            <span class="question-topic">${q.topic}</span>
          </div>
          <div class="question-prompt">${q.prompt}</div>
          <div class="question-input-row">
            <input type="text" class="question-input" placeholder="Your answer..." />
            <button class="btn btn-primary btn-check">Check</button>
            <button class="btn btn-show">Show</button>
          </div>
          <div class="question-result"></div>
        `;
        const input = div.querySelector(".question-input");
        const result = div.querySelector(".question-result");
        div.querySelector(".btn-check").addEventListener("click", () => check(q, input, result));
        input.addEventListener("keydown", e => { if (e.key === "Enter") check(q, input, result); });
        div.querySelector(".btn-show").addEventListener("click", () => {
          result.innerHTML = `<div class="question-answer">Answer: ${q.display}</div>`;
        });
        container.appendChild(div);
      });
    }

    function check(q, input, result) {
      const parsed = parseAnswer(input.value);
      stats.attempted++;
      const ok = parsed !== null && nearlyEqual(parsed, q.answer);
      if (ok) {
        stats.correct++;
        sessionCorrect++;
        input.classList.remove("incorrect");
        input.classList.add("correct");
        result.innerHTML = `<span class="success">✓ Correct</span>`;
      } else {
        input.classList.remove("correct");
        input.classList.add("incorrect");
        result.innerHTML = `<span class="error">✗ Not quite</span>`;
      }
      saveStats();
      updateUI();
    }

    document.getElementById("btnCheckAll").addEventListener("click", () => {
      document.querySelectorAll(".btn-check").forEach(b => b.click());
    });
    document.getElementById("btnRevealAll").addEventListener("click", () => {
      document.querySelectorAll(".btn-show").forEach(b => b.click());
    });
    document.getElementById("btnClear").addEventListener("click", () => {
      document.querySelectorAll(".question-input").forEach(i => {
        i.value = ""; i.classList.remove("correct", "incorrect");
      });
      document.querySelectorAll(".question-result").forEach(r => r.innerHTML = "");
      sessionCorrect = 0;
      updateUI();
    });
    document.getElementById("btnReset").addEventListener("click", () => {
      if (!confirm("Reset all stats?")) return;
      stats = { attempted: 0, correct: 0 };
      saveStats();
      sessionCorrect = 0;
      updateUI();
    });

    // Videos
    const VIDEO_GROUPS = [
      { title: "Ratios", items: [
        { title: "Khan Academy — Intro to Ratios", channel: "Khan Academy", vid: "HpdMJaKaXXc" },
        { title: "Math Antics — Ratios and Rates", channel: "Math Antics", vid: "RQ2nYUBVvqI" },
      ]},
      { title: "Rates", items: [
        { title: "Organic Chem Tutor — Rate Problems", channel: "Organic Chemistry Tutor", vid: "3FManXv4mFM" },
      ]},
      { title: "Percentages", items: [
        { title: "Math Antics — What Are Percentages?", channel: "Math Antics", vid: "JeVSmq1Nrpw" },
        { title: "Khan Academy — Percent Problems", channel: "Khan Academy", vid: "Uf-Rl1e2I4Q" },
        { title: "Organic Chem Tutor — Percent Change", channel: "Organic Chemistry Tutor", vid: "Gcml_MGMt_Y" },
      ]},
      { title: "Unit Conversions", items: [
        { title: "Math Antics — Unit Conversion", channel: "Math Antics", vid: "XKCZn5MLKvk" },
        { title: "Khan Academy — Dimensional Analysis", channel: "Khan Academy", vid: "bIQVjB_LnCM" },
      ]},
    ];

    function renderVideos() {
      const container = document.getElementById("videoList");
      container.innerHTML = "";
      let idx = 0;
      VIDEO_GROUPS.forEach(group => {
        const title = document.createElement("div");
        title.className = "video-group-title";
        title.textContent = group.title;
        container.appendChild(title);
        group.items.forEach(item => {
          idx++;
          const btn = document.createElement("button");
          btn.className = "video-item";
          btn.innerHTML = `<span class="video-num">${idx}</span><div><div class="video-item-title">${item.title}</div><div class="video-item-desc">${item.channel}</div></div>`;
          btn.addEventListener("click", () => setVideo(item, btn));
          container.appendChild(btn);
        });
      });
      const first = VIDEO_GROUPS[0].items[0];
      setVideo(first, container.querySelector(".video-item"));
    }

    function setVideo(item, btn) {
      document.querySelectorAll(".video-item").forEach(b => b.classList.remove("active"));
      if (btn) btn.classList.add("active");
      document.getElementById("ytPlayer").src = `https://www.youtube.com/embed/${item.vid}?rel=0`;
      document.getElementById("videoTitle").textContent = item.title;
      document.getElementById("videoMeta").textContent = item.channel;
    }

    // TOC
    const tocLinks = document.querySelectorAll(".toc-link");
    const sections = document.querySelectorAll(".section");
    function updateToc() {
      let current = "";
      sections.forEach(s => { if (s.getBoundingClientRect().top < 150) current = s.id; });
      tocLinks.forEach(l => l.classList.toggle("active", l.getAttribute("href") === `#${current}`));
    }
    window.addEventListener("scroll", updateToc);

    // Init
    renderQuiz();
    renderVideos();
    updateUI();
    updateToc();
  </script>
</body>
</html>
